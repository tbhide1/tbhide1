{
    "version": "0.1",
    "pageContent": 
	{
        "_comments": "object that contains data for page labels, buttons, etc.",
        "navItems": 
		{
            "_common": 
			{
                "buttonBackToGallery": 
				{
                    "name": "Back To Gallery",
					"method": "backToGallery()",
					"idName": "backToGallery"	
                },
                "buttonStartTutorial": 
				{
                    "name": "Start Tutorial",
					"method": "startTutorialFromDetailsScreen()",
					"idName": "startTutorial"
                },
				"buttonViewDetails": 
				{
                    "name": "View Details",
					"method": "viewDetails()",
					"idName": "stepsViewDetails"	
                }
            }
        }
    },
    "tutorial": 
	{
		"_common": 
		{
			"name": "App Connect for Manufacturing - Using the OPC-UA-Input nodes to subscribe to alarms and events from an OPC Server",
			"shortDescription": "Create a simple message flow by using the OPC-UA-Input node to subscribe to alarms and events from an OPC server. This tutorial requires an installation of App Connect for Manufacturing. If you are familiar with the development of flows using the Manufacturing nodes, you can directly refer to the Run section to learn how to subscribe to alarms or events.",
			"durationText": "This tutorial takes approximately",
			"durationTime": "10 minutes",
			"_resourceToOpenComment": "The ID of the first resource to open when the user imports the tutorial. Resource IDs are defined in the repo_metadata.json.",
			"resourceToOpen": "MainFlow",
			"helpLink": {
				"text": "IBM Documentation",
				"link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=overview-supported-opc-ua-features#mfp_opc_intro__subornot"
			}		
		
		
		},
		"pageDetails": {
			"topicsName": "Tutorial Topics",
			"_topicListComment": "A short list of product concepts or tasks demonstrated by this tutorial",
			"topicList": [
				{
					"title": "Creating and starting an Integration Server"
				},
				{
					"title": "Creating a data source connection"
				},
				{
					"title": "Configuring the OPC-UA-Input node message flow to subscribe to alarms or events"
				},				
				{
					"title": "Deploying the message flows"
				}
			],
			"outcomesName": "Learning outcomes",
			"_outcomesComment": "Learn how to create a message flow to subscribe to Alarms and Events from an OPC server using the OPC-UA-Input node.",			
			"outcomeList": [{
				"title": "Learn how to create a message flow to subscribe to Alarms and Events from an OPC server using the OPC-UA-Input node."
			}],
            "summary": {
				"overviewName": "OVERVIEW",
				"_overviewComment": "This tutorial demonstrates how to create a simple message flow using the OPC-UA-Input node to subscribe to Alarms and Events from an OPC server using the OPC-UA-Input node. ",
				"sections": [
				
					{
						"section": "This tutorial assumes you have installed and configured App Connect for Manufacturing. For more information, see Installing IBM App Connect for Manufacturing in the help links provided below."
					},
										{
						"section": "You must create an integration server before you can deploy integration solutions and related resources. You will also need to connect your Toolkit to an OPC server."
					},
					{
						"section": "You can try out this message flow by simply importing the two provided projects. One application project contains a control flow and another application project contains an input flow."
					},
					{
						"section": "The tutorial will guide you through deploying and starting both flows."
					},
					{
						"section": "The input flow is driven by using the OPC-UA-Input node. The OPC-UA-Input node triggers the flow to run when the subscribed alarm or event is triggered. Message flow should take different action based on whether it is Alarm or Event type. For e.g., alarm should be acknowledged by calling some method on OPC Server. There is no need to acknowledge event."
					}								
				]
			},			
			"helpLinks": {
						"_helpLinksComment": "Helplinks that have a type:web attribute are rendered as web links. Otherwise, links are assumed to be to embedded Help topics in the Knowledge Center.",
						"title": "Find out more",
						"details": [{
							"title": "Knowledge Center link to ",
							"description": "IBM App Connect for Manufacturing overview",
							"link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=manufacturing-app-connect-overview",
							"type": "web"
						},
						{
							"title": "Knowledge Center link to ",
							"description": "Installing and uninstalling IBM App Connect for Manufacturing",
							"link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=manufacturing-installing-uninstalling",
							"type": "web"
						}											
						]
			}
		},
		"pageSteps": {
			"create": {
				"overview": {
					"name": "Create",
					"heading": "Import project",
					"_createComment": "A description of what will happen when the user clicks Import.",
					"sections": [						
						{
							"section": "Click <span class='uicontrol'>Import</span> and the <span class='uicontrol'>App_OPCUA_Input</span> and <span class='uicontrol'>App_OPCUA_Control</span> applications will be imported into your workspace."
						},						
						{
							"section": "The <span class='uicontrol'>App_OPCUA_Input</span> application contains <span class='uicontrol'>Flow_OPCUA_Input.msgflow</span> while <span class='uicontrol'>App_OPCUA_Control</span> contains <span class='uicontrol'>Flow_OPCUA_Control.msgflow</span>."
						}
					]
				},
 				"helpLinks": {
					"title": "Find out more",
					"details": [{
						"title": "IBM Documentation link to ",
						"description": "Developing Message Flow applications",
						"link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=manufacturing-developing-message-flow-applications",
						"type": "web"
					}]
				},
                "actions": 
				{
                    "title": "Create Actions",
                    "details": 
					[
                        {
                            "name": "Import",
                            "method": "importArtifacts()"
                        }
                    ]
                }
            },
            "prepare": 
			{
				"overview": {
				"name": "Prepare",
				"heading": "Prepare for Input Flow",
				"_prepareComment": "Prepare for Input Flow",
				"sections": [{
							"section": "Creating a Data Source connection to an OPC Server",
							"steps": {
								"type": "ordered",
								"details": [{
										"details": "To create a data source, complete the following steps."
									},
									{
										"details": "Ensure that your OPC UA server is up and running."
									},									
									{
										"details": "In the IBM App Connect Enterprise Toolkit, navigate to the Manufacturing Perspective > DataSources."
									},
									{
										"details": "Right-click the Source folder and select Add Mapping Node."
									},
									{
										"details": "Specify a name for the mapping node and click OK. The new data source gets created under the DataSource Properties window."
									},	
									{
										"details": "Select Server URL Type as Endpoint"
									},
									{
										"details": "Specify your OPC Server URL: For example: opc.tcp://TEST_OPC_SERVER:port/OPCUA/SimulationServer"
									}, 
									{
										"details": "Keep the default values for the remaining data source properties and click Create DataSource"
									}, 
									{
										"details": "Check the data source activity in the Logging view for any issues."
									}, 
									{
										"details": "On successful connection of a data source, App Connect for Manufacturing allows you to create Client Item and map it to the available source item from the OPC server."
									}
							]
						}
					},		
					{
						"section": "Creating and starting an Integration Server:",
						"steps": {
							"type": "ordered",
							"details": [
									{
										"details": "Assuming you are using a Windows platform, open an App Connect Enterprise Command Console and start an integration server using the following command:<br><code>IntegrationServer --work-dir C:\\TESTSERVER --name TESTSERVER --admin-rest-api 7600 --http-port-number 7800 --console-log</code> <br>where <b>C:\\TESTSERVER</b> is a folder on your file system that the server will use for its working directory."
									},
									{
										"details": "Navigate to the folder where the server.conf yaml file is located."
									},
									{
										"details": "For example : Modify C:\\TESTSERVER\\server.conf.yaml in windows and /opt/TESTSERVER/server.conf.yaml in linux/unix to add the following lines under 'ConnectorProviders' to add App Connect for Manufacturing connector provider properties.:"
									},
									
									{
										"details": "For Windows: <br><code>&nbsp;&nbsp;ACMfg:<br>&nbsp;&nbsp;&nbsp;&nbsp;connectorClassName: 'com.ibm.industrypack.industryclient.connector.ICConnectorFactory'<br>&nbsp;&nbsp;&nbsp;&nbsp;jarsURL: 'C:\\Program Files\\IBM\\ACMfg\\3.0.1.0\\runtime\\amd64_nt_4'<br>&nbsp;&nbsp;&nbsp;&nbsp;property1: 'trustCertificate=true'<br>&nbsp;&nbsp;&nbsp;&nbsp;property2: 'allowEndpointMismatch=true;discardData=false'</code>"
									},
									{
										"details": "For Linux/Unix: <br><code>&nbsp;&nbsp;ACMfg:<br>&nbsp;&nbsp;&nbsp;&nbsp;connectorClassName: 'com.ibm.industrypack.industryclient.connector.ICConnectorFactory'<br>&nbsp;&nbsp;&nbsp;&nbsp;jarsURL: '/opt/IBM/ACMfg-3.0.1.0/runtime/amd64_linux_2'<br>&nbsp;&nbsp;&nbsp;&nbsp;property1: 'trustCertificate=true'<br>&nbsp;&nbsp;&nbsp;&nbsp;property2: 'allowEndpointMismatch=true;discardData=false'</code>"
									},
									{
										"details": "Note: The jarsURL is the installation directory of App Connect for Manufacturing that points to the amd64_nt_n folder."
									},
									{
										"details": "Save the above server.conf.yaml file and restart the Integration server using the command mentioned in step 1"
									},
									{
										"details": "In the App Connect Enterprise Toolkit Integration Explorer view, right click the folder <img src='http://ot4i.github.io/ot4i.tutorials//dist/images/icons/ace/IntegrationServers.png' alt='' /> and select the menu item  <img src='http://ot4i.github.io/ot4i.tutorials//dist/images/icons/ace/ConnectToAnIntegrationServer.png' alt='' />. In the connection details panel, specify the <b>Host name</b> to be <b>localhost</b>, the <b>Port</b> to be <b>7600</b> and click Finish. This will connect your Toolkit and display the integration server that you started in the last step <img src='http://ot4i.github.io/ot4i.tutorials//dist/images/icons/ace/TESTSERVER.png' alt='' />"
									}							]
						}
					}
             ]
                },
                "helpLinks": 
				{
								"title": "Find out more",
			"details": [
					{
						"title": "IBM Documentation link to ",
						"description": "Using the Manufacturing Perspective",
						"link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=manufacturing-app-connect-overview",
						"type": "web"
					},
					{
						"title": "IBM Documentation link to Troubleshooting ",
						"description": "Troubleshooting and Logging",
						"link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=manufacturing-troubleshooting-support",
						"type": "web"					
					}				]
                }
            },
            "run": 
			{
                "overview": 
				{
                    "name": "Run",
                    "heading": "Configure, Deploy and Test the Input Flow",
                    "_runComment": "The full steps for the user to run through the tutorial. Use 'sections' to render paragraphs, 'steps' with a type of 'ordered' or 'unordered' to render HTML lists, and 'substeps' to render nested lists.",
                "sections":[  					
{
						"section": "<b> Configure the Input Message flow to subscribe to alarms/events </b>",
						"steps": {
							"type": "ordered",
							"details": [{
										"details": "From the Application Development view, under the App_OPCUA_Input application, double-click Flow_OPCUA_Input.msgflow to open in the Flow Exerciser. The flow consists of 'OPC-UA-Input', and 'File Output' nodes. "
									},
									{
										"details": "Navigate to the Flow Exerciser and double-click the OPC-UA-Input node to open the OPC-UA-Input Node properties. "
									},
									{
										"details": "From the node properties window, click 'Add' to open the Manufacturing perspective."
									},
									{
										"details": "Select the appropriate 'Data source' that was created earlier in the Prepare section."
									},
									{
										"details": "Click on 'Refresh Source Item Tree' to load the Source Items. In Source Items, the <b> red flash </b> means that the object emits events. This can be used to have a trigger item triggered by an event of that object."
									},
									{
										"details": "From the 'Client Items' tree, right-click on the 'Item' node and select 'Add Mapping Node'"
									},
									{
										"details": "Specify a name for the node and click 'Ok' "
									},
									{
										"details": "Click 'Create Client Item' from the 'Client Item Properties' tab"
									},
									{
										"details": "Once a client item is created using a source object that trigger events, even the client item will have <b> red flash </b>."
									},
									{
										"details": "Click 'Add Trigger Item' and the Add Trigger Item wizard window loads. "
									},
								    	{
										"details": "Here you can select or add values for"
									},
									{
										"details": "Triggered By: If the source item has value as well as event, then the Triggered By drop down has 2 values – Event and Value. User must select the option that he wants the trigger item to be triggered by. "
									},
									{
										"details": "Event Data: All the data items that can be delivered with an Event. All the children (properties and variables) of the event type object in OPC Server are listed in the Event Data list."
									},
									{
										"details": "At least one checkbox from Event Data must be selected for OPCUA. The event that comes in will have the values attached to it for the selected options. Example event data can be EventId, EventType, Message etc."
									},
									{
										"details": "If we click OK button then the item will be added in trigger item list."
									},
									{
										"details": "When we try to edit the Trigger Item – it won’t allow to change the Triggered By value (it is disabled). But it will allow to click on 'Add button' to add more items."
									},
									{
										"details": "After clicking the Add button, the Manufacturing perspective opens again, and the button label changes to Add Item to Trigger. This way additional values can be added to the same trigger item. These values will come along with the trigger (Event)."
									},
									{
										"details": "Please note that the above items added are the additional items. The input node will be triggered by Event (and not by changes in the client items in the Additional Items List). The data received will have the value for the main event as well as for the additional items."
									},
									{
										"details": "If we select a source item that does not emit event, then the Triggered By value is shown as Value Change. If the source item has both Value and Event, then both will be seen in the drop down."
									},
									{
										"details": "Navigate back to the Flow Exerciser and double-click the File Output node. The File Output node properties window loads."
									},
									{
										"details": "Click the Basic tab. Specify the directory, file name of the output file where the subscribed data values should be stored and set the 'Select the mode for writing to file' as 'Write directly to the output file (append if file exists)'."
									},
									{
										"details": "Save the flow"
									}
							]
						}
					},
					{
							"section": "<b>Deploying the OPC-UA-Input node message flow</b>",
							"steps": {
								"type": "ordered",
								"details": [{
										"details": "Ensure that you are connected to an Integration Server."
									},
									{
										"details": "From the Application Development view , right-click the Flow_OPCUA_Input.msgflow and select 'Deploy'."
									}, 
									{
										"details": "In the Deploy window, select the integration server that you have started, and click Finish."
									}, 
									{
										"details": "Click 'Ok' to confirm the deployment.The App_OPCUA_Input application name is displayed under the selected integration server from Integration Nodes view." 
									}
								]
							}
						},

					{
						"section": "<b>Test the Input Flow</b> ",
						"steps": {
							"type": "ordered",
							"details": [
								{
									"details": "The OPC-UA-Input node automatically triggers the flow to run when the specified alarm or event is triggered by the OPC Server."
								},
								{
									"details": "The Alarm / Event data is stored in an output file by using the File Output node."
								}
							]
						}
					},
					{
						"section": "<b>Additional Steps for Alarms</b>",
						"steps": {
							"type": "ordered",
							"details": [
								{
									"details": "If you have subscribed to Alarms, then you would need to acknowledge the alarm."
								},
								{
									"details": "This can be done by adding an OPC-UA-Method-Call node in the above flow and invoking the method to acknowledge the alarm. "
								},
								{
									"details": "For example, in case you are using the Prosys Simulator Server, you can subscribe to the MyLevelAlarms which is of type ExclusiveLevelAlarmType . "
								},
								{
									"details": "You can acknowledge the alarm by . "
								}
							]
						}
					}
							   							   
                    ]
                },
                "helpLinks": 
				{
                    "title": "Find out more",
                    "details": 
					[
                        {
                             "title": "IBM Documentation link to the Manufacturing Perspective",
				             "description": "Using the Manufacturing Perspective",
				             "type": "web",
				             "link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=manufacturing-app-connect-overview"
                        },
						{
							"title": "IBM Documentation link to Troubleshooting",
							"description": "Troubleshooting and Logging",
							"link": "https://www.ibm.com/docs/en/app-connect/12.0?topic=manufacturing-troubleshooting-support",
							"type": "web"
					
						}						
                    ]
                }
            }
        }
    }
}
